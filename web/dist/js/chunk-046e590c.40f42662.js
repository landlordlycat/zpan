(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046e590c"],{"0a49":function(t,e,n){var i=n("9b43"),a=n("626a"),o=n("4bf8"),r=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,m){for(var p,v,b=o(e),y=a(b),w=i(s,m,3),_=r(y.length),g=0,$=n?h(e,_):c?h(e,0):void 0;_>g;g++)if((d||g in y)&&(p=y[g],v=w(p,g,b),t))if(n)$[g]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:$.push(p)}else if(u)return!1;return f?-1:l||u?u:$}}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},2758:function(t,e,n){"use strict";n("594f")},"594f":function(t,e,n){},"5df3":function(t,e,n){"use strict";var i=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})}))},6275:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("8bbf"),a=n.n(i),o=n("9225"),r=n("c0d6"),s=n("41cb"),c=function(t){var e=a.a.extend(t);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(t);var n=new e({i18n:o["a"],store:r["a"],router:s["a"],propsData:t}).$mount(document.createElement("div"));return new Promise((function(t,e){n.$once("completed",(function(e){return t(e)})),n.$once("cancel",(function(t){return e(t)}))}))}}},7514:function(t,e,n){"use strict";var i=n("5ca1"),a=n("0a49")(5),o="find",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),i(i.P+i.F*r,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},"8e6b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:t.$t("dialog.outlink-title"),visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("div",[n("el-input",{attrs:{type:"textarea",rows:20},model:{value:t.links,callback:function(e){t.links=e},expression:"links"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.$t("click-copy-link")))]),n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("op.close")))])],1)])],1)},a=[],o=(n("ac6a"),n("5df3"),n("ebbf")),r={mixins:[o["b"]],props:{items:Array},data:function(){return{links:""}},methods:{loadLinks:function(){var t=this;Promise.all(this.items.map((function(e){return t.$zpan.File.get(e.alias)}))).then((function(e){e.forEach((function(e){t.links+=e.url+"\r\n"}))}))}},mounted:function(){this.loadLinks()}},s=r,c=n("2877"),l=Object(c["a"])(s,i,a,!1,null,"ffee72ca",null);e["a"]=l.exports},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},ce0d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Topbar"),n("div",{staticStyle:{margin:"20px 50px"}},[t.matter.id?t.matter.dirtype?n("el-card",{staticClass:"folder-card",attrs:{shadow:"never","body-style":"height: 100%"}},[n("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[n("div",[n("span",{staticClass:"name"},[t._v(t._s(t.matter.name))]),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-download"},on:{click:t.onDownloadClick}},[t._v("下载")])],1)]),n("p",{staticClass:"time"},[n("i",{staticClass:"el-icon-time"}),n("span",[t._v(t._s(t._f("moment")(t.matter.created,"YYYY-MM-DD HH:hh")))]),n("span",[t._v("失效时间："+t._s(t.expireTime))])])]),n("FileExplorer",{ref:"fexp",staticStyle:{height:"calc(100% - 80px)"},attrs:{dataLoader:t.dataLoader,linkLoader:t.linkLoader,rowButtons:t.rowButtons,rootDir:t.rootDir},on:{"selection-change":t.onSelectionChange}})],1):t.info.id?n("el-card",{staticClass:"file-card",attrs:{shadow:"never"}},[n("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[n("div",[n("span",{staticClass:"name"},[t._v(t._s(t.matter.name))]),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-download"},on:{click:function(e){return t.openDownload(t.matter)}}},[t._v("下载")])],1)]),n("p",{staticClass:"time"},[n("i",{staticClass:"el-icon-time"}),n("span",[t._v(t._s(t._f("moment")(t.matter.created,"YYYY-MM-DD HH:hh")))]),n("span",[t._v("失效时间："+t._s(t.expireTime))])])]),n("div",{staticClass:"content"},[n("div",[n("i",{staticClass:"el-icon-document"}),n("p",[t._v("文件大小："+t._s(t.matter.size))])])])]):t._e():n("el-empty",{attrs:{description:"分享已失效"}},[n("el-button",{attrs:{type:"primary"}},[t._v("去分享者主页")])],1)],1)],1)},a=[],o=(n("7514"),n("7f7f"),n("6275")),r=n("90fe"),s=n("8e6b"),c=n("0b47"),l={components:{Topbar:c["a"]},data:function(){return{rowButtons:[{name:"download",icon:"el-icon-download",action:this.openDownload,shown:function(t){return!t.dirtype}}],info:{},matter:{},selectedItems:[]}},computed:{layout:function(){return this.info.type?"file":"folder"},rootDir:function(){return"".concat(this.matter.parent).concat(this.matter.name,"/")},expireTime:function(){if(this.info.expire_at)return this.info.expire_at.moment()}},methods:{dataLoader:function(t){var e=this;return new Promise((function(n,i){if(e.info.id&&!e.info.type){var a=e.$route.params.alias;e.$zpan.Share.listMatters(a,{dir:t}).then((function(t){var e=t.data;e.list=e.list.map((function(t){return t.size=r["a"].formatBytes(t.size,1),t.fullpath="".concat(t.parent).concat(t.name),t.dirtype&&(t.fullpath+="/"),t})),n(e)}))}}))},linkLoader:function(t){var e=this;return new Promise((function(n,i){e.$zpan.Share.getMatter(e.info.alias,t.alias).then((function(t){n(t.url)})).catch(i)}))},openDownload:function(t){this.linkLoader(t).then((function(e){var n=document.createElement("a");n.href=e,n.download=t.name,n.click()}))},onSelectionChange:function(t){this.selectedItems=t},onDownloadClick:function(t){0==this.selectedItems.length?this.$message({type:"warning",message:"您还没有选择下载的文件"}):1==this.selectedItems.length?this.openDownload(this.selectedItems[0]):Object(o["a"])(s["a"])({items:this.selectedItems})},listRefresh:function(t){var e=this;this.$zpan.Share.findMatter(t).then((function(t){e.matter=t.data,e.matter.size=r["a"].formatBytes(e.matter.size,1),e.$refs.fexp&&e.$refs.fexp.listRefresh()})).catch((function(t){console.log(12,t)}))}},watch:{$route:function(t){this.listRefresh(t.params.alias)}},mounted:function(){var t=this,e=this.$route.params.alias;this.$zpan.Share.find(e).then((function(n){var i=n.data;i.protected&&localStorage.getItem("zpan-share")!=e?t.$router.push({name:"share-draw"}):(t.info=i,t.listRefresh(e),document.title="".concat(i.name," | Zpan"))}))}},u=l,f=(n("2758"),n("2877")),d=Object(f["a"])(u,i,a,!1,null,"7d28ab66",null);e["default"]=d.exports},e853:function(t,e,n){var i=n("d3f4"),a=n("1169"),o=n("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},ebbf:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));n("7f7f"),n("ac6a");var i={data:function(){return{cs:{}}},watch:{$route:function(t,e){this.setCs()}},computed:{},methods:{setCs:function(){var t=this;this.$store.state.storages.forEach((function(e){e.name==t.$route.params.sname&&(t.cs=e)}))},getSid:function(){return this.cs.id}},mounted:function(){this.setCs()}},a=i,o={data:function(){return{visible:!1}},watch:{visible:function(t){!t&&this.$destroy()}},mounted:function(){document.body.appendChild(this.$el),this.visible=!0},destroyed:function(){this.$el.parentNode.removeChild(this.$el)},methods:{open:function(){this.visible=!0},close:function(){this.visible=!1},completed:function(){this.$emit("completed")},finish:function(){this.close(),this.completed()}}},r=o}}]);