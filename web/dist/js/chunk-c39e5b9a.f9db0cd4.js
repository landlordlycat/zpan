(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c39e5b9a"],{"8a3a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":t.handleUpload,accept:t.acceptImgs,"file-list":t.fileList,"on-preview":t.showPicPreview,"before-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:t.dialog.show,title:t.dialog.title,center:""},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},[i("img",{attrs:{width:"100%",src:t.dialog.imgUrl,alt:""}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"copy-link",attrs:{type:"primary","data-clipboard-text":t.dialog.imgUrl},on:{click:function(e){t.dialog.show=!1}}},[t._v(t._s(t.$t("copy-link")))])],1)])],1)},s=[],o=(i("a481"),i("ac6a"),i("7f7f"),i("90fe")),a=i("ebbf"),l={mixins:[a["a"]],data:function(){return{picHost:"",acceptImgs:"image/jpeg,image/png,image/gif",fileList:[],dialog:{show:!1,title:"",imgUrl:""}}},methods:{getLink:function(t){var e=this;return new Promise((function(i,n){e.$zpan.File.get(t).then((function(t){i(t.url)}))}))},listRefresh:function(){var t=this;this.$zpan.File.list({sid:this.getSid(),type:"image"}).then((function(e){t.fileList=e.list.map((function(t){return{alias:t.alias,name:t.name,url:t.url}})),t.fileList.forEach((function(e){t.getLink(e.alias).then((function(t){e.url=t}))})),t.loading=!1}))},handleUpload:function(t){var e=this,i=this.$loading({lock:!0,text:"Uploading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=(new Date).getTime();t.filename=t.file.name.replace("image",n),this.$zpan.File.upload(this.getSid(),t).then((function(n){var s={name:t.filename,url:n.data.url};e.showPicPreview(s),e.listRefresh(),i.close()})).catch((function(){e.listRefresh(),i.close()}))},handleRemove:function(t,e){var i=this;return this.$confirm(this.$t("tips.remove"),this.$t("op.delete")+" ".concat(t.name),{type:"warning",confirmButtonText:this.$t("op.confirm"),cancelButtonText:this.$t("op.cancel")}).then((function(){i.$zpan.File.delete(t.alias).then((function(t){i.$message({type:"success",message:i.$t("msg.delete-success")})}))}))},showPicPreview:function(t){this.dialog={show:!0,title:t.name,imgUrl:t.url}}},mounted:function(){this.listRefresh(),o["a"].setupPasteUpload(this.handleUpload)}},c=l,r=i("2877"),u=Object(r["a"])(c,n,s,!1,null,"53e19936",null);e["default"]=u.exports},ebbf:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));i("7f7f"),i("ac6a");var n={data:function(){return{cs:{}}},watch:{$route:function(t,e){this.setCs()}},computed:{},methods:{setCs:function(){var t=this;this.$store.state.storages.forEach((function(e){e.name==t.$route.params.sname&&(t.cs=e)}))},getSid:function(){return this.cs.id}},mounted:function(){this.setCs()}},s=n,o={data:function(){return{visible:!1}},watch:{visible:function(t){!t&&this.$destroy()}},mounted:function(){document.body.appendChild(this.$el),this.visible=!0},destroyed:function(){this.$el.parentNode.removeChild(this.$el)},methods:{open:function(){this.visible=!0},close:function(){this.visible=!1},completed:function(){this.$emit("completed")},finish:function(){this.close(),this.completed()}}},a=o}}]);